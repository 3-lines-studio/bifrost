# Bifrost

> Bifrost is a Go library for server-side rendering React components using Bun. It bridges Go backends with React frontends via Unix socket communication.

Bifrost enables Go HTTP servers to render React components on the server, providing full SSR capabilities while maintaining a simple API. Static pages are pre-rendered at build time into HTML with client-side React hydration (MPA-style), requiring no Bun runtime to serve. Development hot reload is handled by Air with proxy configuration. Production deployment uses embedded assets for single binary distribution.

## Features

- Server-side rendering of React components
- Props loading from Go to React
- MPA-style static pages with pre-rendered HTML + client hydration (no runtime Bun)
- Hot reload via Air with proxy configuration
- Single binary deployment with embedded assets
- Project scaffolding with templates (`minimal`, `spa`, `desktop`)

## Docs

- [API Reference](docs.md): Complete API documentation including App, Page, static generation, and configuration options
- [Example Application](example/cmd/full/main.go): Working example with SSR pages, static pages, and dynamic routes
- [Air Configuration](example/.air.toml): Hot reload proxy configuration for development

### Internal Implementation

- [Types](internal/types/types.go): Core types including `PropsLoader`, `PageConfig`, and `RedirectError`
- [Runtime](internal/runtime/client.go): Bun process management and IPC protocol
- [Page Handler](internal/page/handler.go): HTTP handler logic for SSR and static pages
- [Build System](internal/build/engine.go): Asset building and bundling logic
- [Asset Resolution](internal/assets/resolver.go): Manifest-driven embedded FS handling
- [CLI Helpers](internal/cli/output.go): Terminal output utilities

### CLI Commands

- [Init Command](cmd/init/main.go): Project scaffolding with templates
- [Doctor Command](cmd/doctor/main.go): Repair `.bifrost` directory
- [Init Logic](internal/initcmd/init.go): Template processing and project creation
- [Templates](internal/templates/embed.go): Embedded template filesystem

## Template Options

When creating a new project, choose from:
- `minimal` (default): Basic SSR setup with props loading
- `spa`: Client-only single page application with `WithClient()`
- `desktop`: Desktop app with webview and system tray support

## New API

```go
app := bifrost.New(
    bifrostFS,
    bifrost.Page("/", "./pages/home.tsx", bifrost.WithLoader(loadProps)),
    bifrost.Page("/about", "./pages/about.tsx", bifrost.WithClient()),
    bifrost.Page("/blog", "./pages/blog.tsx", bifrost.WithStatic()),
)
defer app.Stop()

api := chi.NewRouter()
http.ListenAndServe(":8080", app.Wrap(api))
```
